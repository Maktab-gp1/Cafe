{% extends "base1.html" %}
{% load static %}
{% load filters %}
{% block content %}

<div class="container-xxl bg-white p-0">
 <!-- Spinner Start -->
  <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
          <span class="sr-only">Loading...</span>
      </div>
  </div>
  <!-- Spinner End -->
{% include "navbar.html" %}

      <div class="container-xxl py-5 bg-dark  mb-5">
            <div class="container my-3 py-5">
                     <form method="get" action="">
                    <input type="hidden" name="export_csv" value="1">
                    <button type="submit" class="btn btn-primary py-sm-1 px-sm-3 me-4 m-2">Export</button>
                    </form>
                    </div>
                </div>
        
          <div class="container my-2 py-2">
            <table class="table table-dark table-striped" id="example">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Phone</th>
                    <th scope="col">Table</th>
                    <th scope="col">created</th>
                    <th scope="col">Orders</th>
                    <th scope="col">Updated</th>
                    <th scope="col">Status</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                    {% for order in object_list %}
                    <tr>
                        <th scope="row"><a href="{{order.get_absolute_url }}">{{order.id}}</a></th>
                        <td>{{order.phone}}</td>
                        <td>{{order.table}}</td>
                        <td>{{order.created}}</td>
                        <td>
                            <ul>
                                {% for item in order.items.all %}
                                    <li>{{item.product}} x{{item.quantity}}</li>
                                {% endfor %} 
                            </ul> 
                        </td>
                        <td>{{order.updated}}</td>
                        <td>
                        {{order.status}}
                        {% show_order order %} 
                        </td>
                    </tr>    
                    {% endfor %} 
                </tbody>
                
              </table>
          </div>
      </div>
  </div>
  <!-- Navbar & Hero End -->

    <div class="container-xxl position-relative p-0 ">
        <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Menu Items</h4>
                        {% for product in products %}
                        <a class="btn btn-link" href={% url "updateitem" pk=product.pk %}>{{product.name}}</a>
                       
                        {% endfor %}
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Categories</h4>
                        {% for category in categories %}
                        <a class="btn btn-link" href={% url "categoriesview" pk=category.pk %}>{{category.name}}</a>
                       
                        {% endfor %}
                    </div>
                    
                </div>
            </div> 
    </div>
  </div>

<script>
let dataTable;
let dataTableIsInitialized = false;



const initDataTable = async () => {
    if (dataTableIsInitialized) {
        dataTable.destroy();
    }
    
    dataTable = $("#example").DataTable( {
        columnDefs: [
            { className: "centered", targets: [0, 1, 2, 3, 4, 5, 6 ,7 ] },
            
        ],
        
        
    }); 
    dataTableIsInitialized = true;
};

window.addEventListener("load", async () => {
    await initDataTable();
});


</script>

                   
{% endblock content %}
